var l=Object.defineProperty;var d=(a,e,r)=>e in a?l(a,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):a[e]=r;var o=(a,e,r)=>d(a,typeof e!="symbol"?e+"":e,r);const g={provider:"groq",ollamaBaseUrl:"http://localhost:11434",ollamaModelId:"qwen3:4b",groqApiKey:"",groqModelId:"llama-3.3-70b-versatile",geminiApiKey:"",geminiModelId:"gemini-1.5-flash",masterResumeYaml:""},t=class t{constructor(){}static getInstance(){return t.instance||(t.instance=new t),t.instance}async getConfig(){return await chrome.storage.sync.get(g)}async saveConfig(e){await chrome.storage.sync.set(e)}async getProviderConfig(){const e=await this.getConfig();switch(e.provider){case"ollama":return{provider:"ollama",modelId:e.ollamaModelId,baseUrl:e.ollamaBaseUrl};case"groq":return{provider:"groq",apiKey:e.groqApiKey,modelId:e.groqModelId};case"gemini":return{provider:"gemini",apiKey:e.geminiApiKey,modelId:e.geminiModelId};default:throw new Error(`Provider ${e.provider} not supported`)}}async getMasterResumeYaml(){return(await this.getConfig()).masterResumeYaml}async setMasterResumeYaml(e){await this.saveConfig({masterResumeYaml:e})}async isConfigured(){const e=await this.getConfig();switch(e.provider){case"ollama":return!!e.ollamaBaseUrl&&!!e.ollamaModelId;case"groq":return!!e.groqApiKey;case"gemini":return!!e.geminiApiKey;default:return!1}}};o(t,"instance");let s=t;chrome.runtime.onInstalled.addListener(()=>{console.log("CV-Tailor extension installed")});chrome.action.onClicked.addListener(async a=>{a.id&&await chrome.sidePanel.open({tabId:a.id})});chrome.runtime.onMessage.addListener((a,e,r)=>(m(a,r),!0));async function m(a,e){const r=s.getInstance();try{switch(a.type){case"GET_CONFIG":const i=await r.getConfig();e({success:!0,data:i});break;case"SAVE_CONFIG":await r.saveConfig(a.data),e({success:!0});break;case"GET_PROVIDER_CONFIG":const n=await r.getProviderConfig();e({success:!0,data:n});break;case"IS_CONFIGURED":const c=await r.isConfigured();e({success:!0,data:c});break;default:e({success:!1,error:"Unknown message type"})}}catch(i){e({success:!1,error:i.message})}}
